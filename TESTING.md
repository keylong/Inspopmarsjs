# Toast错误处理系统测试计划

## 测试场景

### 1. 会员过期错误测试
- **条件**: `buytype != 3` 且 `buydate` 已过期
- **预期**: 显示"会员已过期"Toast，1秒后弹出升级窗口
- **测试方法**: 修改用户数据使会员过期，尝试下载

### 2. 下载次数不足测试  
- **条件**: 会员未过期但 `value <= 0`
- **预期**: 显示"下载次数不足"Toast，显示剩余次数
- **测试方法**: 设置用户value=0，尝试下载

### 3. IP限制错误测试
- **条件**: 免费用户达到IP限制
- **预期**: 显示"今日下载已达上限"Toast，引导注册
- **测试方法**: 同IP多次下载直到限制

### 4. 终身会员测试
- **条件**: `buytype = 3`
- **预期**: 无论buydate如何都能正常下载
- **测试方法**: 设置buytype=3，buydate=null或过期日期

### 5. 成功下载测试
- **条件**: 有效会员且有剩余次数
- **预期**: 显示"下载成功"Toast
- **测试方法**: 正常下载流程

## 关键检查点

1. ✅ Toast库兼容性 - 使用Zustand系统
2. ✅ 错误处理优先级 - 会员过期 > 次数不足 > IP限制
3. ✅ 交互体验 - Toast替代弹窗，延迟显示操作按钮
4. ✅ TypeScript类型安全 - 所有接口正确定义
5. ✅ 安全性修复 - 不再允许过期会员下载

## 测试状态
- 代码已完成部署
- 服务器运行正常
- 准备进行用户测试